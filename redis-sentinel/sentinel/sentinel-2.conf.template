# =============================================================================
# Redis Sentinel Configuration - Node 2
# =============================================================================
# Sentinel monitors Redis master and orchestrates automatic failover.
# This is one of 3 Sentinel nodes forming a quorum.
# =============================================================================

# -----------------------------------------------------------------------------
# NETWORK CONFIGURATION
# -----------------------------------------------------------------------------

# Sentinel port
port 26379

# Bind to all interfaces for Docker networking
bind 0.0.0.0

# Disable protected mode for Docker internal networking
protected-mode no

# -----------------------------------------------------------------------------
# SENTINEL IDENTIFICATION
# -----------------------------------------------------------------------------

# Unique Sentinel ID - MUST BE DIFFERENT FROM OTHER SENTINELS
sentinel myid 2222222222222222222222222222222222222222

# Announce IP to other Sentinels (Docker hostname)
sentinel announce-ip sentinel-2
sentinel announce-port 26379

# -----------------------------------------------------------------------------
# MASTER MONITORING
# -----------------------------------------------------------------------------

# Monitor the same master as other Sentinels
# Same <master-name>, <ip>, <port>, and <quorum>
sentinel monitor kasagi-master redis-master 6379 2

# -----------------------------------------------------------------------------
# FAILOVER CONFIGURATION
# -----------------------------------------------------------------------------

# Time (ms) master must be unreachable before considering it down
sentinel down-after-milliseconds kasagi-master 5000

# Number of replicas to reconfigure in parallel during failover
sentinel parallel-syncs kasagi-master 1

# Timeout (ms) for failover operations
sentinel failover-timeout kasagi-master 60000

# -----------------------------------------------------------------------------
# NOTIFICATION SCRIPTS (OPTIONAL)
# -----------------------------------------------------------------------------

# sentinel notification-script kasagi-master /scripts/notify.sh
# sentinel client-reconfig-script kasagi-master /scripts/reconfig.sh

# -----------------------------------------------------------------------------
# AUTHENTICATION (IF REQUIRED)
# -----------------------------------------------------------------------------

# sentinel auth-pass kasagi-master <your-password>
# sentinel auth-user kasagi-master <your-username>
# requirepass <sentinel-password>

# -----------------------------------------------------------------------------
# SECURITY
# -----------------------------------------------------------------------------

sentinel deny-scripts-reconfig yes

# -----------------------------------------------------------------------------
# LOGGING
# -----------------------------------------------------------------------------

loglevel notice
logfile ""

# -----------------------------------------------------------------------------
# ADVANCED SETTINGS
# -----------------------------------------------------------------------------

# Resolve hostnames for Docker DNS
sentinel resolve-hostnames yes
sentinel announce-hostnames yes

# Working directory
dir /data

